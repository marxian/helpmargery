<%

var days = moment.weekdaysShort();
var hours = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23];

var currentWeek = moment().weekday(0);

var current = moment();

var bookedSegments = [];

%>

<div class="date-controls">
	<table>
		<td>
			<tr><button class="week-prev">&lt;</button></tr>
			<tr><button class="week-next">&gt;</button></tr>
			<tr><span><%= currentWeek.format('DD') %> &mdash; <%= currentWeek.add('7', 'days').format('DD') %> <%= current.format('MMMM') %></span></tr>
		</td>
	</table>
</div>

<div id="calendar">
	<div class="th">
		<span class="time">&nbsp;</span>
		<% _.each(days, function( day ) { %>
			<span
				class="<%= day.toLowerCase() %>"
				data-day="<%= day.toLowerCase() %>"
				data-month="<%= current.format('M') %>"
				data-year="<% current.format('Y') %>">
					<%= day.toLowerCase() %>
			</span>
		<% }); %>
	</div>

	<div id="weeks">

		<% _.each(hours, function( hour ) { %>
			<div class="hour">
				<div class="time" data-date="<%= hour %>"><%= moment.duration(hour, 'hour').format('h:mm') %></div>
				<% _.each(days, function( day ) { %>
					<div
						class="<%= day %>"
						data-day="<%= day %>"
						data-month="<%= current.format('M') %>"
						data-year="<% current.format('Y') %>">
							<a href="javascript:;" role="button" data-goto="book"></a>
							<!-- <span role="button" class="booked"></span> -->
					</div>
				<% }); %>
			</div>
		<% }); %>

	</div>
</div>